import React, {useState, useEffect} from 'react';
import { Chapter } from '../types';

export const CHAPTERS: Chapter[] = [
  {
    id: 'ch1',
    title: 'ржкрзНрж░ржержо ржзрж╛ржк: рж╕ржЮрзНржЪрзЯ ржЖрж░ ржмрж┐ржирж┐рзЯрзЛржЧрзЗрж░ ржЧрзБрж░рзБрждрзНржм',
    content: (
      <div className="space-y-8 text-2xl font-light text-stone-800 leading-relaxed">
        <p id="ch1-line1">ржорж╛рж╕рзЗрж░ рж╢рзЗрж╖рзЗ ржЕржирзЗржХ рж╕ржорзЯ ржоржирзЗ рж╣рзЯ тАФ тАЬржЯрж╛ржХрж╛ ржПрж▓, ржЖржмрж╛рж░ ржЧрзЗрж▓тАж ржХрж┐ржЫрзБржЗ ржерж╛ржХрж▓ ржирж╛тАЭред ЁЯШХ</p>
        <p id="ch1-line2">рж╣ржарж╛рзО рж╢рж░рзАрж░ ржЦрж╛рж░рж╛ржк, ржмрж╛рзЬрж┐рж░ ржХрж┐ржЫрзБ ржнрж╛ржЩрж╛, ржмрж╛ ржХрж╛ржЬ ржмржирзНржз тАФ ржПржЗ ржЬрж┐ржирж┐рж╕ржЧрзБрж▓рзЛ ржЖржЧрзЗ ржерзЗржХрзЗ ржмрж▓рзЗ ржЖрж╕рзЗ ржирж╛ред рждржЦржи рж╣рж╛рждрзЗ ржпржжрж┐ рж╕рж╛ржорж╛ржирзНржп ржЯрж╛ржХрж╛ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж░рж╛ржЦрж╛ ржерж╛ржХрзЗ, ржЪрж╛ржкржЯрж╛ ржПржХржЯрзБ ржХржо рж▓рж╛ржЧрзЗред ржЖрж░ рж╢рзБржзрзБ ржЯрж╛ржХрж╛ ржЬржорж┐рзЯрзЗ рж░рж╛ржЦрж╛ ржирзЯ тАФ ржЯрж╛ржХрж╛ ржХрзАржнрж╛ржмрзЗ рж╕ржорзЯрзЗрж░ рж╕ржЩрзНржЧрзЗ ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржмрзЬ рж╣рждрзЗ ржкрж╛рж░рзЗ, рж╕рзЗржЯрж╛ ржмрзЛржЭрж╛ржУ ржЬрзАржмржирзЗрж░ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗред</p>
        <p id="ch1-line3">ржзрж░рзЛ, рждрзБржорж┐ ржкрзНрж░рждрж┐ржжрж┐ржи ржмрж╛ржЬрж╛рж░ ржерзЗржХрзЗ рж╕ржмржЬрж┐ ржХрж┐ржирзЗ ржЖржирзЛред рж╕ржм рж╕ржмржЬрж┐ ржПржХржжрж┐ржирзЗржЗ рж░рж╛ржирзНржирж╛ ржХрж░рзЛ ржирж╛ тАФ ржХрж┐ржЫрзБ ржЖржЬ, ржХрж┐ржЫрзБ ржХрж╛рж▓ред</p>
        <p id="ch1-line4" className='highlight-target'><span className='highlight'>рж╕ржЮрзНржЪрзЯ ржарж┐ржХ рж╕рзЗржЗ рж░ржХржоред ржЖржЬ ржкрж╛ржУрзЯрж╛ ржЯрж╛ржХрж╛рж░ рж╕ржмржЯрж╛ ржЖржЬржЗ ржЦрж░ржЪ ржирж╛ ржХрж░рзЗ, ржЕрж▓рзНржк ржХрж░рзЗ ржЖрж▓рж╛ржжрж╛ рж░рж╛ржЦрж╛ред</span></p>
        <p id="ch1-line5" className='highlight-target'>ржЖрж░ ржзрж░рзЛ, <span className='highlight'>ржмрж╛рзЬрж┐рж░ ржЫрж╛ржжрзЗ ржПржХржЯрж╛ ржЧрж╛ржЫ рж▓рж╛ржЧрж╛рж▓рзЗ тАФ ржкрзНрж░ржержорзЗ ржЫрзЛржЯ, ржХрж┐ржирзНрждрзБ ржпрждрзНржи ржкрзЗрж▓рзЗ ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржЫрж╛рзЯрж╛ ржжрзЗрзЯ, ржлрж▓ ржжрзЗрзЯред </span>ЁЯМ▒</p>
        <p id="ch1-line6">ржарж┐ржХ рждрзЗржоржиржЗ, ржмрж┐ржирж┐рзЯрзЛржЧ ржорж╛ржирзЗ ржЯрж╛ржХрж╛ ржПржоржи ржЬрж╛рзЯржЧрж╛рзЯ ржерж╛ржХрж╛, ржпрзЗржЦрж╛ржирзЗ рж╕ржорзЯрзЗрж░ рж╕ржЩрзНржЧрзЗ рждрж╛рж░ ржХрж╛ржЬрзЗрж░ рж╢ржХрзНрждрж┐ ржмрж╛рзЬрждрзЗ ржкрж╛рж░рзЗред</p>
        <p id="ch1-line7" className='highlight-target'><span className='highlight'>ржПржЯрж╛ рж╕ржмрж╕ржорзЯ рж▓рж╛ржн рж╣ржмрзЗ тАФ ржПржоржи ржирзЯред ржХржЦржиржУ ржзрзАрж░рзЗ ржЪрж▓рзЗ, ржХржЦржиржУ ржЭрзБржБржХрж┐ржУ ржерж╛ржХрзЗред</span> рждрж╛ржЗ рж╢рзБржзрзБ ржмрзЛржЭрж╛ржЯрж╛ ржЬрж░рзБрж░рж┐, рждрж╛рзЬрж╛рж╣рзБрзЬрзЛ ржирзЯред</p>
        
      </div>
    ),
    quizzes: [
      {
        id: 'q1-1',
        question: 'рж╕ржЮрзНржЪржпрж╝ рж╢рзБрж░рзБ ржХрж░рж╛рж░ рж╕ржмржерзЗржХрзЗ ржнрж╛рж▓рзЛ ржЙржкрж╛ржпрж╝ ржХрзА?',
        options: [
          { id: 'a', text: 'ржорж╛рж╕ рж╢рзЗрж╖рзЗ ржпрж╛ ржмрж╛ржБржЪржмрзЗ рждрж╛ ржЬржорж╛ржирзЛ', isCorrect: false },
          { id: 'b', text: 'ржЖржпрж╝ ржХрж░рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржХрж┐ржЫрзБ ржЕржВрж╢ рж╕рж░рж┐ржпрж╝рзЗ рж░рж╛ржЦрж╛', isCorrect: true },
          { id: 'c', text: 'рж╕ржм ржЯрж╛ржХрж╛ ржЦрж░ржЪ ржХрж░рзЗ ржлрзЗрж▓рж╛', isCorrect: false }
        ],
        explanation: 'ржЖржпрж╝ ржХрж░рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржХрж┐ржЫрзБ ржЕржВрж╢ рж╕рж░рж┐ржпрж╝рзЗ рж░рж╛ржЦрж╛ рж╕ржмржерзЗржХрзЗ ржХрж╛рж░рзНржпржХрж░ ржкржжрзНржзрждрж┐ред',
        highlightLineId: 'ch1-line4'
      },
      {
        id: 'q1-2',
        question: 'ржЧрж╛ржЫ рж▓рж╛ржЧрж╛ржирзЛрж░ ржЙржжрж╛рж╣рж░ржгржЯрж╛ ржХрзА ржмрзЛржЭрж╛рзЯ?',
        options: [
          { id: 'a', text: 'ржжрзНрж░рзБржд ржЯрж╛ржХрж╛ ржкрж╛ржУрзЯрж╛', isCorrect: false },
          { id: 'b', text: 'рж╣ржарж╛рзО рж▓рж╛ржн', isCorrect: false },
          { id: 'c', text: 'рж╕ржорзЯрзЗрж░ рж╕ржЩрзНржЧрзЗ ржзрзАрж░рзЗ ржмрзЬ рж╣ржУрзЯрж╛', isCorrect: true }
        ],
        explanation: 'ржЯрж╛ржХрж╛ ржЬржорж╛ржирзЛ рж╣рж▓рзЛ ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржкрзНрж░рждрж┐ ржПржХржЯрж┐ ржжрж╛ржпрж╝рж┐рждрзНржмрж╢рзАрж▓ ржкржжржХрзНрж╖рзЗржкред',
        highlightLineId: 'ch1-line5'
      },
      {
        id: 'q1-3',
        question: 'ржмрж┐ржирж┐рзЯрзЛржЧрзЗ ржХрзА ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ?',
        options: [
          { id: 'a', text: 'ржЭрзБржБржХрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ', isCorrect: true },
          { id: 'b', text: 'рж╢рзБржзрзБ рж▓рж╛ржн', isCorrect: false},
          { id: 'c', text: 'ржХрзЛржирзЛ ржЭрзБржБржХрж┐ ржирзЗржЗ', isCorrect: false }
        ],
        explanation: 'ржЫрзЛржЯ ржЫрзЛржЯ ржлрзЛржБржЯрж╛ ржерзЗржХрзЗржЗ рж╕ржорзБржжрзНрж░ рждрзИрж░рж┐ рж╣ржпрж╝ред рждрж╛ржЗ ржирж┐ржпрж╝ржорж┐ржд рж╕ржЮрзНржЪржпрж╝ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред',
        highlightLineId: 'ch1-line7'
      }
    ]
  },
  {
    id: 'ch2',
    title: 'ржжрзНржмрж┐рждрзАржпрж╝ ржзрж╛ржк: рж╣ржарж╛рзО ржЦрж░ржЪрзЗрж░ ржЬржирзНржп рж╕ржЮрзНржЪржпрж╝',
    content: (
      <div className="space-y-8 text-2xl font-light text-stone-800 leading-relaxed">
        <p id="ch2-line1">ржЬрзАржмржирзЗ рж╣ржарж╛рзО ржХрж┐ржЫрзБ ржЦрж╛рж░рж╛ржк ржШржЯржирж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ тАФ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓ ржЦрж░ржЪ, рж╕рж╛ржЗржХрзЗрж▓ ржмрж╛ ржорзЛржмрж╛ржЗрж▓ рж╕рж╛рж░рзНржнрж┐рж╕ ржжрзЗржУржпрж╝рж╛, ржмрж╛ ржорж╛рж╕рж┐ржХ ржЖржпрж╝рзЗрж░ ржорж╛ржЭрзЗ ржХрзЛржирзЛ ржлрж╛ржБржХред рждржЦржи ржпржжрж┐ ржХрж┐ржЫрзБ ржЯрж╛ржХрж╛ ржкрж╛рж╢рзЗ ржирж╛ ржерж╛ржХрзЗ, рждрзЛ рж╕ржорж╕рзНржпрж╛ ржЕржирзЗржХ ржмржбрж╝ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред рждрж╛ржЗ ржПржХржЯрж╛ ржЫрзЛржЯ ржЯрж╛ржХрж╛ ржкрж╛рж╢рзЗ рж░рж╛ржЦрж╛ ржЦрзБржм ржЬрж░рзБрж░рж┐ред</p>
        <p id="ch2-line2" className="highlight-target">ржзрж░рзЗ ржирж╛ржУ, ржорж╛рж╕рзЗ рждрзЛржорж╛рж░ <span className='highlight'>ржЖржпрж╝ ржерзЗржХрзЗ рж╕рж╛ржорж╛ржирзНржп рзлрзжрзж тАУ рззрзжрзжрзж ржЯрж╛ржХрж╛ ржЖрж▓рж╛ржжрж╛ рж░рж╛ржЦрзЛред</span></p>
        <p id="ch2-line3" className='highlight-target'>  тАв ржПржХржжрж┐ржи рж╣ржарж╛рзО ржЕрж╕рзБрж╕рзНрже рж╣ржпрж╝рзЗ ржкржбрж╝рж▓рзЗржи, ржХржпрж╝рзЗржХржжрж┐ржи ржХрж╛ржЬ ржХрж░рж╛ ржЧрзЗрж▓ ржирж╛ред рждржЦржи ржПржЗ ржЯрж╛ржХрж╛ ржХрж╛ржЬрзЗ рж▓рж╛ржЧржмрзЗред</p>
        <p id="ch2-line4">  тАв ржПржЯрж╛ ржпрзЗржоржи ржирж┐рж░рж╛ржкржж ржЫрж╛ржЙржирж┐рж░ ржоржд тАФ рж╣ржарж╛рзО ржмрзГрж╖рзНржЯрж┐ ржмрж╛ рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ рждрзБржорж┐ ржнрж┐ржЬрзЛ ржирж╛ред</p>
        <p id="ch2-line5" className='highlight-target'>ржзрж░рзЗ ржирж╛ржУ, рждрзБржорж┐ рж╣ржарж╛рзО ржХрзЛржирзЛ ржЬрж░рзБрж░рж┐ ржЦрж░ржЪрзЗ рзлрзжрзжрзж ржЯрж╛ржХрж╛ рж▓рж╛ржЧрж▓ред <span className='highlight'>ржпржжрж┐ ржкрж╛рж╢рзЗ ржХрж┐ржЫрзБ ржирж╛ ржерж╛ржХрзЗ, ржзрж╛рж░ ржирж┐рждрзЗ рж╣ржмрзЗ ржмрж╛ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржжрзЗрж░рж┐ рж╣ржмрзЗред ржкрж╛рж╢рзЗ ржЯрж╛ржХрж╛ ржерж╛ржХрж▓рзЗ, ржХрзЛржирзЛ ржЪрж╛ржк ржЫрж╛ржбрж╝рж╛ржЗ рж╕рж╣ржЬрзЗ рж╕рж╛ржорж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗред</span></p>
        <p id="ch2-line6" className='highlight-target'><span className='highlight'>ржПржХржЯрж╛ ржЖрж▓рж╛ржжрж╛ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ рж░рж╛ржЦрж╛ ржЯрж╛ржХрж╛, ржпрзЗржЯрж╛ рж╢рзБржзрзБ ржПржЗрж░ржХржо рж╣ржарж╛рзО ржжрж░ржХрж╛рж░рзЗрж░ рж╕ржоржпрж╝ ржХрж╛ржЬрзЗ ржЖрж╕рзЗред
          ржжрзИржиржирзНржжрж┐ржи ржЦрж░ржЪрзЗрж░ ржЬржирзНржп ржирж╛ред
          ржЦрзБрж╢рж┐рж░ ржЦрж░ржЪрзЗрж░ ржЬржирзНржпржУ ржирж╛ред</span></p>
      
      </div>
    ),
    quizzes: [
      {
        id: 'q2-1',
        question: 'ржЬрж░рзБрж░рж┐ ржЦрж░ржЪрзЗрж░ ржЬржирзНржп ржХрзЗржи ржЯрж╛ржХрж╛ рж░рж╛ржЦрж╛ ржжрж░ржХрж╛рж░?',
        options: [
          { id: 'a', text: 'ржЦрзБрж╢рж┐рж░ ржЦрж░ржЪрзЗрж░ ржЬржирзНржп', isCorrect: false },
          { id: 'b', text: 'ржжрзИржиржирзНржжрж┐ржи ржЦрж░ржЪрзЗрж░ ржЬржирзНржп', isCorrect: false },
          { id: 'c', text: 'рж╣ржарж╛рзО рж╕ржорж╕рзНржпрж╛рж░ рж╕ржоржпрж╝', isCorrect: true }
        ],
        explanation: 'ржмрж┐ржирж┐ржпрж╝рзЛржЧрзЗрж░ ржорзВрж▓ рж▓ржХрзНрж╖рзНржп рж╣рж▓рзЛ ржЖржкржирж╛рж░ ржЬржорж╛ржирзЛ ржЯрж╛ржХрж╛рж░ ржорзВрж▓рзНржп ржмрзГржжрзНржзрж┐ ржХрж░рж╛ред',
        highlightLineId: 'ch2-line6'
      },
      {
        id: 'q2-2',
        question: 'ржХрждрзЛ ржЯрж╛ржХрж╛ рж╣ржарж╛рзО ржЦрж░ржЪрзЗрж░ ржЬржирзНржп рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд?',
        options: [
          { id: 'a', text: 'рж░рж╛ржЦрж╛ ржЙржЪрж┐ржд ржиржпрж╝', isCorrect: false },
          { id: 'b', text: 'рж╕рж╛ржорж╛ржирзНржп, ржирж┐ржпрж╝ржорж┐ржд рж░рж╛ржЦрж╛', isCorrect: true },
          { id: 'c', text: 'рж╕ржм ржЯрж╛ржХрж╛ ржПржХржмрж╛рж░рзЗ', isCorrect: false }
        ],
        explanation: 'ржмрж┐ржирж┐ржпрж╝рзЛржЧ ржорж╛ржирзЗ ржЖржкржирж╛рж░ ржЯрж╛ржХрж╛ржХрзЗ ржХрзМрж╢рж▓ржЧрждржнрж╛ржмрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрж┐ржпрж╝рзЗ ржЖржпрж╝ ржмрзГржжрзНржзрж┐ ржХрж░рж╛ред',
        highlightLineId: 'ch2-line2'
      },
      {
        id: 'q2-3',
        question: ' рж╣ржарж╛рзО ржЦрж░ржЪрзЗрж░ ржЯрж╛ржХрж╛ ржерж╛ржХрж▓рзЗ ржХрзА ржХржо рж╣ржпрж╝?',
        options: [
          { id: 'a', text: 'ржжрзБрж╢рзНржЪрж┐ржирзНрждрж╛', isCorrect: true },
          { id: 'b', text: 'ржХрж╛ржЬ', isCorrect: false },
          { id: 'c', text: 'рж╕ржорж╕рзНржпрж╛', isCorrect: true }
        ],
        explanation: 'ржирж┐рж░рж╛ржкржж ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржЯрж╛ржХрж╛ рж░рж╛ржЦрж▓рзЗ ржЖржорж░рж╛ рж╕рзБржж ржмрж╛ рж▓рж╛ржнрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЕрждрж┐рж░рж┐ржХрзНржд ржЖржпрж╝ ржкрж╛ржЗред',
        highlightLineId: 'ch2-line5'
      }
    ]
  },
  {
    id: 'ch3',
    title: 'рждрзГрждрзАржпрж╝ ржзрж╛ржк: рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзАржорж╛',
    content: (
      <div className="space-y-8 text-2xl font-light text-stone-800 leading-relaxed">
        <p id="ch3-line1" className='highlight-target'>рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржнрж░рзНрждрж┐ рж╣рж▓рзЗ ржЯрж╛ржХрж╛ ржЦрзБржм рждрж╛рзЬрж╛рждрж╛рзЬрж┐ рж╢рзЗрж╖ рж╣рзЯрзЗ ржпрж╛рзЯред ржУрж╖рзБржз, ржмрзЗржб, ржЯрзЗрж╕рзНржЯ тАФ рж╕ржм ржорж┐рж▓рж┐рзЯрзЗ ржПржХржжрж┐ржирзЗржЗ ржХрзЯрзЗржХ рж╣рж╛ржЬрж╛рж░ ржЯрж╛ржХрж╛ рж▓рж╛ржЧрждрзЗ ржкрж╛рж░рзЗред рждржЦржи рж╣рж╛рждрзЗ <span className="highlight">ржЯрж╛ржХрж╛ ржирж╛ ржерж╛ржХрж▓рзЗ ржзрж╛рж░ ржХрж░рждрзЗ рж╣рзЯ ржмрж╛ ржЪрж┐ржХрж┐рзОрж╕рж╛ ржерж╛ржорж┐рзЯрзЗ ржжрж┐рждрзЗ рж╣рзЯред рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзАржорж╛ ржерж╛ржХрж▓рзЗ ржПржЗ ржЪрж╛ржкржЯрж╛ ржХржо рж╣рзЯред</span></p>
        <p id="ch3-line2" className='highlight-target'>ржзрж░рж╛ ржпрж╛ржХ, <span className='highlight'>ржЖржкржирж╛рж░ рж╣ржарж╛рзО ржЦрзБржм ржЕрж╕рзБрж╕рзНрже рж╣рзЯрзЗ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржнрж░рзНрждрж┐ рж╣рж▓ред ржкрзБрж░рзЛ ржЦрж░ржЪ ржЖржкржирж╛ржХрзЗ ржПржХрж╛ ржжрж┐рждрзЗ рж╣рж▓рзЛ ржирж╛ред ржХрж┐ржЫрзБржЯрж╛ ржЦрж░ржЪ ржмрзАржорж╛рж░ ржорж╛ржзрзНржпржорзЗ ржорзЗржЯрж╛ржирзЛ ржпрж╛рзЯред</span> ржПржЯрж╛ ржПржоржи ржирж╛ ржпрзЗ ржЕрж╕рзБржЦ ржЖржЯржХрж╛рзЯ тАФ ржХрж┐ржирзНрждрзБ ржЕрж╕рзБржЦ рж╣рж▓рзЗ ржЯрж╛ржХрж╛рж░ ржзрж╛ржХрзНржХрж╛ ржХржо рж▓рж╛ржЧрзЗред</p>
        <p id="ch3-line3">рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзАржорж╛рж░ ржЬржирзНржп рж╕рж╛ржзрж╛рж░ржгржд ржкрзНрж░рждрж┐ ржорж╛рж╕рзЗ ржмрж╛ ржмржЫрж░рзЗ ржЕрж▓рзНржк ржЯрж╛ржХрж╛ ржжрж┐рждрзЗ рж╣рзЯред ржПржЗ ржЯрж╛ржХрж╛ ржЕржирзЗржХрзЗрж░ ржХрж╛ржЫрзЗ ржорзЛржмрж╛ржЗрж▓ рж░рж┐ржЪрж╛рж░рзНржЬ ржмрж╛ ржХрзЗржмрж▓ ржмрж┐рж▓рзЗрж░ ржорждрзЛржЗ рж▓рж╛ржЧрзЗред ржХрж┐ржирзНрждрзБ ржжрж░ржХрж╛рж░рзЗрж░ рж╕ржорзЯ ржПрж░ ржХрж╛ржЬ ржЕржирзЗржХ ржмрзЬ рж╣рзЯред</p>
        <p id="ch3-line4" className='font-bold'>ржХржд ржЯрж╛ржХрж╛ рж▓рж╛ржЧрждрзЗ ржкрж╛рж░рзЗ ржзрж╛рж░ржгрж╛ рж╣рж┐рж╕рзЗржмрзЗ:</p>
        <p id="ch3-line5">тАв ржорж╛рж╕рзЗ ржХрзЯрзЗржХрж╢рзЛ ржЯрж╛ржХрж╛</p>
        <p id="ch3-line6">тАв ржмрж╛ ржмржЫрж░рзЗ ржХрзЯрзЗржХ рж╣рж╛ржЬрж╛рж░ ржЯрж╛ржХрж╛</p>
        <p id="ch3-line7">ржПржЯрж╛ ржмрзЯрж╕, ржкрж░рж┐ржмрж╛рж░ рж╕ржжрж╕рзНржп ржЖрж░ ржХржнрж╛рж░рзЗржЬрзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред рждрж╛ржЗ рж╕ржмрж╛рж░ ржЬржирзНржп ржПржХрж░ржХржо ржирж╛ред</p>
        <p id="ch3-line8" className="font-bold">ржмрж┐рж╢рзНржмрж╛рж╕ржпрзЛржЧрзНржпржнрж╛ржмрзЗ ржХрзЛржерж╛ ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ?</p>
        <p id="ch3-line9">тАв <span className='font-bold'>ржХрж╛ржЬрзЗрж░ ржЬрж╛рзЯржЧрж╛ ржерзЗржХрзЗ:</span> ржЕржирзЗржХ ржЕржлрж┐рж╕ ржмрж╛ ржХрзЛржорзНржкрж╛ржирж┐ ржХрж░рзНржорзАржжрзЗрж░ ржЬржирзНржп ржжрзЗрзЯ</p>
        <p id="ch3-line10" className='highlight-target'>тАв <span className='highlight'><span className='font-bold'>рж╕рж░ржХрж╛рж░рж┐ рж╣рж╛рж╕ржкрж╛рждрж╛рж▓ ржмрж╛ рж╕рж░ржХрж╛рж░рж┐ ржкрзНрж░ржХрж▓рзНржкрзЗрж░ ржорж╛ржзрзНржпржорзЗ:</span> ржПржЦрж╛ржирзЗ рж╕рж╛ржзрж╛рж░ржгржд ржирж╛ржо ржиржерж┐ржнрзБржХрзНржд ржХрж░рж╛ рж╣рзЯ</span></p>
        <p id="ch3-line11">ржЕржЪрзЗржирж╛ ржлрзЛржи ржХрж▓ ржмрж╛ тАЬржЖржЬржЗ ржирж┐ржитАЭ ржмрж▓рж╛ рж▓рзЛржХрзЗрж░ ржХржерж╛рзЯ рж╕рж╣ржЬрзЗ ржнрж░рж╕рж╛ ржХрж░рж╛ ржарж┐ржХ ржирж╛ред</p>
      </div>
    ),
    quizzes: [
      {
        id: 'q3-1',
        question: 'рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзАржорж╛ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржХрж╛ржЬрзЗ ржЖрж╕рзЗ ржХржЦржи?',
        options: [
          { id: 'a', text: 'ржЙрзОрж╕ржмрзЗрж░ рж╕ржорзЯ', isCorrect: false },
          { id: 'b', text: 'рж╣рж╛рж╕ржкрж╛рждрж╛рж▓рзЗ ржнрж░рзНрждрж┐ рж╣рж▓рзЗ', isCorrect: true },
          { id: 'c', text: 'ржорзЛржмрж╛ржЗрж▓ ржХрзЗржирж╛рж░ рж╕ржорзЯ', isCorrect: false }
        ],
        explanation: 'рж╕ржарж┐ржХ ржЙржжрзНржжрзЗрж╢рзНржпрзЗ ржирзЗржУржпрж╝рж╛ ржЛржг ржЬрзАржмржи ржЙржирзНржиржпрж╝ржирзЗрж░ ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╣рж╛рждрж┐ржпрж╝рж╛рж░ред',
        highlightLineId: 'ch3-line2'
      },
      {
        id: 'q3-2',
        question: 'рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзАржорж╛рж░ ржЯрж╛ржХрж╛ ржХрж┐рж╕рзЗрж░ ржЪрж╛ржк ржХржорж╛рзЯ?',
        options: [
          { id: 'a', text: 'рж╕ржорзЯрзЗрж░ ржЕржнрж╛ржм', isCorrect: false },
          { id: 'b', text: 'ржХрж╛ржЬрзЗрж░ ржЪрж╛ржк', isCorrect: false },
          { id: 'c', text: 'ржЯрж╛ржХрж╛рж░', isCorrect: true }
        ],
        explanation: 'ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржЛржг ржЖржкржирж╛рж░ ржЖрж░рзНржерж┐ржХ рж╕рзНржмрж╛ржзрзАржирждрж╛ ржХрзНрж╖рждрж┐ржЧрзНрж░рж╕рзНржд ржХрж░рждрзЗ ржкрж╛рж░рзЗред',
        highlightLineId: 'ch3-line1'
      },
      {
        id: 'q3-3',
        question: 'ржХрзЛржи ржЬрж╛рзЯржЧрж╛ ржмрзЗрж╢рж┐ ржмрж┐рж╢рзНржмрж╛рж╕ржпрзЛржЧрзНржп?',
        options: [
          { id: 'a', text: 'рж╣ржарж╛рзО ржлрзЛржи ржХрж░рж╛ рж▓рзЛржХ', isCorrect: false },
          { id: 'b', text: 'рж╕рж░ржХрж╛рж░рж┐ ржмрж╛ ржХрж╛ржЬрзЗрж░ ржЬрж╛рзЯржЧрж╛ ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржмрзНржпржмрж╕рзНржерж╛', isCorrect: true },
          { id: 'c', text: 'рж░рж╛рж╕рзНрждрж╛рзЯ ржкрзЛрж╕рзНржЯрж╛рж░', isCorrect: false }
        ],
        explanation: 'ржкрзНрж░рждрж┐ржЯрж┐ ржЯрж╛ржХрж╛рж░ ржорзВрж▓рзНржп рж░ржпрж╝рзЗржЫрзЗ ржПржмржВ ржжрж╛ржпрж╝рж┐рждрзНржмрж╢рзАрж▓ржнрж╛ржмрзЗ ржЦрж░ржЪ ржХрж░рж╛ ржЙржЪрж┐рждред',
        highlightLineId: 'ch3-line10'
      }
    ]
  },
  {
    id: 'ch4',
    title: 'ржЪрждрзБрж░рзНрже ржзрж╛ржк: ржорж┐ржЙржЪрзБрзЯрж╛рж▓ ржлрж╛ржирзНржб',
    content: (
      <div className="space-y-8 text-2xl font-light text-stone-800 leading-relaxed">
        <p id="ch4-line1" className='highlight-target'>ржЖржЬ рззрзжрзж ржЯрж╛ржХрж╛ ржжрж┐рзЯрзЗ ржпрж╛ ржХрзЗржирж╛ ржпрж╛рзЯ, ржХрзЯрзЗржХ ржмржЫрж░ ржкрж░рзЗ ржПржХржЗ ржЬрж┐ржирж┐рж╕рзЗрж░ ржжрж╛ржо ржмрзЗрзЬрзЗ ржпрж╛рзЯред <span className='highlight'>ржШрж░рзЗ ржмрж╛ ржмрзНржпрж╛ржВржХрзЗ ржЯрж╛ржХрж╛ ржЪрзБржкржЪрж╛ржк ржкрзЬрзЗ ржерж╛ржХрж▓рзЗ, рж╕рзЗржЗ ржЯрж╛ржХрж╛рж░ ржХрзЗржирж╛рж░ рж╢ржХрзНрждрж┐ ржзрзАрж░рзЗ ржзрзАрж░рзЗ ржХржорзЗред</span> ржПржЗ ржмрзНржпрж╛ржкрж╛рж░ржЯрж╛ржЗ ржЕржирзЗржХ ржорж╛ржирзБрж╖ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗ ржирж╛ред</p>
        <p id="ch4-line2">ржорж┐ржЙржЪрзБрзЯрж╛рж▓ ржлрж╛ржирзНржб ржорж╛ржирзЗтАФржЕржирзЗржХ ржорж╛ржирзБрж╖рзЗрж░ ржЕрж▓рзНржк ржЕрж▓рзНржк ржЯрж╛ржХрж╛ ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ ржЬржорж╛ рж╣рзЯред рж╕рзЗржЗ ржЯрж╛ржХрж╛ ржмрж┐ржнрж┐ржирзНржи ржЬрж╛рзЯржЧрж╛рзЯ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред ржПржХрж╛ржЗ рж╕ржм ржмрзЛржЭрж╛ ржЯрж╛ржирж╛ ржирзЯ тАФ ржЕржирзЗржХрзЗрж░ ржЯрж╛ржХрж╛ ржорж┐рж▓рж┐рзЯрзЗ ржПржХрж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рзЗред ржПржЯрж╛ ржХрзЛржирзЛ ржЬрж╛ржжрзБ ржирж╛, ржЖрж░ ржЯрж╛ржХрж╛ ржжрзНржмрж┐ржЧрзБржг ржХрж░рж╛рж░ ржЧрж▓рзНржкржУ ржирж╛ред рж╢рзБржзрзБ ржЯрж╛ржХрж╛ржХрзЗ ржПржХ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржЯржХрзЗ ржирж╛ рж░рзЗржЦрзЗ ржЖржкржирж╛рж░ ржЬржирзНржп ржХрж╛ржЬ ржХрж░рж╛ржмрзЗред</p>
        <p id="ch4-line3">ржпржжрж┐ ржЖржкржирж┐ ржжрзАрж░рзНржШ рж╕ржоржпрж╝ ржзрж░рзЗ ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржпрж╛ржи, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржЖржкржирж╛рж░ ржЕрж░рзНрже ржмрзГржжрзНржзрж┐ ржХрж░ржмрзЗред</p>
        <p id="ch4-line4">ржПржЦрж╛ржирзЗ ржорж╛ржирзБрж╖ рж╕рж╛ржзрж╛рж░ржгржд</p>
        <p id="ch4-line5" className='highlight-target'>тАв <span className='highlight'>ржЕрж▓рзНржк ржЕрж▓рзНржк ржЯрж╛ржХрж╛</span></p>
        <p id="ch4-line6">тАв ржирж┐рзЯржо ржХрж░рзЗ</p>
        <p id="ch4-line7">рж╕ржм ржЯрж╛ржХрж╛ ржПржХрж╕рж╛ржерзЗ ржврзЛржХрж╛ржирзЛ рж╣рзЯ ржирж╛ред ржХрж╛рж░ржг ржжрзИржиржирзНржжрж┐ржи ржЬрзАржмржи ржерж╛ржорзЗ ржирж╛ тАФ ржнрж╛рзЬрж╛, ржЦрж╛ржмрж╛рж░, ржЕрж╕рзБржЦ рж╕ржм ржЪрж▓рждрзЗржЗ ржерж╛ржХрзЗред</p>
        <p id="ch4-line8" className='font-bold'>ржЭрзБржБржХрж┐ ржЖржЫрзЗ ржХрж┐?</p>
        <p id="ch4-line9">рж╣рзНржпрж╛ржБ, ржЭрзБржБржХрж┐ ржЖржЫрзЗред
          ржХржЦржирзЛ ржЯрж╛ржХрж╛ ржмрж╛рзЬрзЗ, ржХржЦржирзЛ ржПржХржЗ ржерж╛ржХрзЗ, ржХржЦржирзЛ ржХржорзЗржУ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред ржПржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржирж╛ тАФ ржПржЗ ржХржерж╛ржЯрж╛ ржкрж░рж┐рж╖рзНржХрж╛рж░ржнрж╛ржмрзЗ ржЬрж╛ржирж╛ ржЬрж░рзБрж░рж┐ред ржПржЗ ржЬржирзНржпржЗ ржорж╛ржирзБрж╖ рж╕ржм ржЯрж╛ржХрж╛ ржПржЦрж╛ржирзЗ рж░рж╛ржЦрзЗ ржирж╛ред</p>
        <p id="ch4-line10" className='font-bold'>ржмрж┐рж╢рзНржмрж╛рж╕ржпрзЛржЧрзНржпржнрж╛ржмрзЗ ржХрзЛржерж╛ ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ?</p>
        <p id="ch4-line11" className='highlight-target'>тАв <span className='highlight'>ржирж┐ржЬрзЗрж░ ржкрж░рж┐ржЪрж┐ржд ржмрзНржпрж╛ржВржХ ржерзЗржХрзЗ</span></p>
        <p id="ch4-line12">тАв ржпрзЗржЦрж╛ржирзЗ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржЖржЫрзЗ</p>
        <p id="ch4-line13">ржЕржЪрзЗржирж╛ ржЕрзНржпрж╛ржк, рж╣ржарж╛рзО ржлрзЛржи, тАЬржЖржЬржЗ рж╢рзЗрж╖ рж╕рзБржпрзЛржЧтАЭ тАФ ржПржЗржЧрзБрж▓рзЛрждрзЗ рж╕рж╛ржмржзрж╛ржи ржерж╛ржХрж╛ ржнрж╛рж▓рзЛред</p>

      </div>
    ),
    quizzes: [
      {
        id: 'q4-1',
        question: 'ржЯрж╛ржХрж╛ ржЪрзБржкржЪрж╛ржк ржкрзЬрзЗ ржерж╛ржХрж▓рзЗ ржХрзА ржХржорзЗ?',
        options: [
          { id: 'a', text: 'ржУржЬржи', isCorrect: false },
          { id: 'b', text: 'ржХрзЗржирж╛рж░ рж╢ржХрзНрждрж┐', isCorrect: true },
          { id: 'c', text: 'рж░ржЩ', isCorrect: false }
        ],
        explanation: 'ржмржпрж╝рж╕ ржмрж╛ржбрж╝рж▓рзЗ ржЖржпрж╝рзЗрж░ ржХрзНрж╖ржорждрж╛ рж╣рзНрж░рж╛рж╕ ржкрж╛ржпрж╝, рждрж╛ржЗ ржЕржЧрзНрж░рж┐ржо ржкрж░рж┐ржХрж▓рзНржкржирж╛ ржЕржкрж░рж┐рж╣рж╛рж░рзНржпред',
        highlightLineId: 'ch4-line1'
      },
      {
        id: 'q4-2',
        question: 'ржорж┐ржЙржЪрзБрзЯрж╛рж▓ ржлрж╛ржирзНржбрзЗ ржЯрж╛ржХрж╛ ржХрзЗржоржиржнрж╛ржмрзЗ рж░рж╛ржЦрж╛ рж╣рзЯ?',
        options: [
          { id: 'a', text: 'ржЕрж▓рзНржк ржЕрж▓рзНржк ржЯрж╛ржХрж╛ ржирж┐рзЯржо ржХрж░рзЗ', isCorrect: true },
          { id: 'b', text: 'ржзрж╛рж░ ржХрж░рж╛ ржЯрж╛ржХрж╛', isCorrect: false },
          { id: 'c', text: 'рж╕ржм ржЯрж╛ржХрж╛ ржПржХрж╕рж╛ржерзЗ', isCorrect: false }
        ],
        explanation: 'ржкрзЗржирж╢ржи рж╕рзНржХрж┐ржо ржЕржмрж╕рж░ ржЧрзНрж░рж╣ржгрзЗрж░ ржкрж░ ржЖрж░рзНржерж┐ржХ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред',
        highlightLineId: 'ch4-line5'
      },
      {
        id: 'q4-3',
        question: 'ржХрзЛржи ржЬрж╛рзЯржЧрж╛ ржмрзЗрж╢рж┐ ржмрж┐рж╢рзНржмрж╛рж╕ржпрзЛржЧрзНржп?',
        options: [
          { id: 'a', text: 'рж╣ржарж╛рзО ржлрзЛржи ржХрж░рж╛ ржЕрзНржпрж╛ржк', isCorrect: false },
          { id: 'b', text: 'рж░рж╛рж╕рзНрждрж╛рзЯ ржмрж▓рж╛ рж▓рзЛржХ', isCorrect: false },
          { id: 'c', text: 'ржирж┐ржЬрзЗрж░ ржкрж░рж┐ржЪрж┐ржд ржмрзНржпрж╛ржВржХ ржерзЗржХрзЗ', isCorrect: true }
        ],
        explanation: 'ржжрзАрж░рзНржШржорзЗржпрж╝рж╛ржжрзА ржЖрж░рзНржерж┐ржХ рж╕рзБрж░ржХрзНрж╖рж╛рж░ ржЬржирзНржп рж╕ржорж╕рзНржд ржЬрзАржмржи ржкрж░рзНржпрж╛ржпрж╝рзЗ ржкрж░рж┐ржХрж▓рзНржкржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред',
        highlightLineId: 'ch4-line11'
      }
    ]
  },
  {
    id: 'ch5',
    title: 'рж╖рж╖рзНржа ржзрж╛ржк: ржЖрж░рзНржерж┐ржХ ржкрзНрж░рждрж╛рж░ржгрж╛ ржерзЗржХрзЗ ржмрж╛ржБржЪрж╛',
    content: (
      <div className="space-y-8 text-2xl font-light text-stone-800 leading-relaxed">
        <p id="ch5-line1">ржЯрж╛ржХрж╛ ржЬржорж╛ржирзЛ ржХрж╖рзНржЯрзЗрж░ ржХрж╛ржЬред ржХрж┐ржирзНрждрзБ ржЯрж╛ржХрж╛ рж╣рж╛рж░рж╛рждрзЗ рж╕ржорзЯ рж▓рж╛ржЧрзЗ ржирж╛тАФржПржХржЯрж╛ ржлрзЛржи ржХрж▓, ржПржХржЯрж╛ ржорзЗрж╕рзЗржЬ, ржПржХржЯрж╛ ржнрзБрж▓ ржмрж┐рж╢рзНржмрж╛рж╕ред рждрж╛ржЗ ржЯрж╛ржХрж╛ ржмрж╛рзЬрж╛ржирзЛрж░ ржХржерж╛ ржпрзЗржоржи ржЬрж╛ржирж╛ ржжрж░ржХрж╛рж░, ржЯрж╛ржХрж╛ ржХрзАржнрж╛ржмрзЗ рж╣рж╛рж░рж╛рзЯ рж╕рзЗржЯрж╛ржУ ржЬрж╛ржирж╛ рж╕ржорж╛ржи ржЬрж░рзБрж░рж┐ред</p>
        <p id="ch5-line2">рж╕рзНржХрзНржпрж╛ржо ржорж╛ржирзЗ ржЪрзБрж░рж┐ тАФ рж╢рзБржзрзБ рж╣рж╛ржд ржжрж┐рзЯрзЗ ржирж╛, ржХржерж╛ ржжрж┐рзЯрзЗред</p>
        <p id="ch5-line3">ржЕржирзЗржХ рж╕ржорзЯ ржорж╛ржирзБрж╖ ржнрж╛ржмрзЗтАФтАЬржЖржорж┐ рждрзЛ ржХрж╛ржЙржХрзЗ ржаржХрж╛ржЪрзНржЫрж┐ ржирж╛, ржЖржорж╛ржХрзЗ ржХрзЗржи ржаржХрж╛ржмрзЗ?тАЭ
ржХрж┐ржирзНрждрзБ рж╕рзНржХрзНржпрж╛ржо ржПржЗржнрж╛ржмрзЗржЗ ржХрж╛ржЬ ржХрж░рзЗред ржкрж░рж┐ржЪрж┐ржд ржнрж╛рж╖рж╛рзЯ ржХржерж╛ ржмрж▓рзЗ, рждрж╛рзЬрж╛ ржжрзЗрзЯ, ржЖрж░ ржмрж▓рзЗтАФржПржЗ рж╕рзБржпрзЛржЧ ржЖрж░ ржЖрж╕ржмрзЗ ржирж╛ред</p>
        <p id="ch5-line4">ржПржХржЯрж╛ рж╕рж╛ржзрж╛рж░ржг ржШржЯржирж╛ ржзрж░рзЛред
рж╣ржарж╛рзО ржлрзЛржи ржПрж▓рзЛтАФрждрзБржорж┐ ржирж╛ржХрж┐ рж▓ржЯрж╛рж░рж┐ ржЬрж┐рждрзЗржЫред ржХрж┐ржирзНрждрзБ ржЯрж╛ржХрж╛ рждрзБрж▓рждрзЗ ржЧрзЗрж▓рзЗ ржЖржЧрзЗ рзлрзжрзж ржЯрж╛ржХрж╛ ржжрж┐рждрзЗ рж╣ржмрзЗред ржорж╛ржирзБрж╖ ржнрж╛ржмрзЗ, тАЬрзлрзжрзжржЗ рждрзЛ, ржжрж┐рж▓рзЗ ржпржжрж┐ ржмрзЬ ржХрж┐ржЫрзБ ржкрж╛ржЗ!тАЭ
ржПржЗржнрж╛ржмрзЗржЗ ржЯрж╛ржХрж╛ ржпрж╛рзЯред</p>
        <p id="ch5-line5" className='font-bold'>ржХрж┐ржЫрзБ рж╕рж╛ржзрж╛рж░ржг рж╕рзНржХрзНржпрж╛ржо ржПржнрж╛ржмрзЗ рж╣рзЯ</p>
        <p id="ch5-line6" className='highlight-target'><span className='highlight'><span className='font-bold'>рж▓ржЯрж╛рж░рж┐ ржмрж╛ ржкрзНрж░рж╛ржЗржЬ рж╕рзНржХрзНржпрж╛ржо:</span> ржпрзЗржЦрж╛ржирзЗ рждрзБржорж┐ ржЕржВрж╢ ржирж╛ржУржирж┐, рж╕рзЗржЦрж╛ржи ржерзЗржХрзЗ ржкрзБрж░рж╕рзНржХрж╛рж░ ржЖрж╕рзЗ ржирж╛ред</span> рждржмрзБ ржмрж▓рж╛ рж╣рзЯтАФтАЬржЖржкржирж┐ ржЬрж┐рждрзЗржЫрзЗржиредтАЭ ржЖрж░ рж╕ржЩрзНржЧрзЗ рж╕ржЩрзНржЧрзЗ рждрж╛рзЬрж╛ред</p>
        <p id="ch5-line7"><span className='font-bold'>ржЗржиржнрзЗрж╕рзНржЯржорзЗржирзНржЯ ржмрж╛ ржкржЮрзНржЬрж┐ рж╕рзНржХрзНржпрж╛ржо:</span> ржПржЦрж╛ржирзЗ ржмрж▓рж╛ рж╣рзЯ ржЯрж╛ржХрж╛ ржЦрзБржм рждрж╛рзЬрж╛рждрж╛рзЬрж┐ ржмрж╛рзЬржмрзЗ, ржЭрзБржБржХрж┐ ржирзЗржЗред ржХрзЯрзЗржХржЬржирзЗрж░ ржЙржжрж╛рж╣рж░ржг ржжрзЗржЦрж╛рзЯтАФтАЬржУ ржжрзЗржЦрзЛ, ржУ рждрзЛ ржкрзЗрж▓!тАЭ
ржХрж┐ржирзНрждрзБ рж╕ржм ржХржерж╛ржЗ ржнрж╛рж▓рзЛтАФржЦрж╛рж░рж╛ржк ржжрж┐ржХ ржПржХржЯрж╛ржУ ржирзЗржЗред</p>
        <p id="ch5-line8" className='highlight-target'><span className='highlight'><span className='font-bold'>ржЪрж╛ржХрж░рж┐ ржмрж╛ рж╢рж┐ржХрзНрж╖рж╛ рж╕рзНржХрзНржпрж╛ржо:</span> ржПржЦрж╛ржирзЗ ржХрж╛ржЬ ржмрж╛ ржХрзЛрж░рзНрж╕ ржкрж╛ржХрж╛ ржмрж▓рзЗред ржХрж┐ржирзНрждрзБ ржХрж╛ржЬ рж╢рзБрж░рзБрж░ ржЖржЧрзЗржЗ ржЯрж╛ржХрж╛ ржЪрж╛ржЗред</span> ржлрж┐, ржлрж╛ржЗрж▓ ржЪрж╛рж░рзНржЬ, рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржитАФржирж╛ржо ржЖрж▓рж╛ржжрж╛, ржХрж╛ржЬ ржПржХред</p>
        <p id="ch5-line9" className='highlight-target'><span className='highlight'>рж╕рзНржХрзНржпрж╛ржо ржЪрзЗржирж╛рж░ рж╕рж╣ржЬ ржЙржкрж╛рзЯ 
ржпрзЗржЦрж╛ржирзЗ рждрж╛рзЬрж╛ ржЖржЫрзЗ, ржЧрзЛржкржи ржХржерж╛ ржЖржЫрзЗ, ржЖрж░ ржЖржЧрзЗ ржЯрж╛ржХрж╛ ржЪрж╛ржУрзЯрж╛ рж╣ржЪрзНржЫрзЗ</span> тАФ рж╕рзЗржЦрж╛ржирзЗ ржерж╛ржорж╛ ржжрж░ржХрж╛рж░ред
ржмрж┐рж╢рзНржмрж╛рж╕ржпрзЛржЧрзНржп ржЬрж╛рзЯржЧрж╛ рж╕ржорзЯ ржирзЗрзЯ, ржкрзНрж░рж╢рзНржи ржХрж░рждрзЗ ржжрзЗрзЯред</p>
        <p id="ch5-line10">ржЯрж╛ржХрж╛ ржмрж╛рзЬрж╛ржирзЛ ржзрзАрж░рзЗ рж╣рзЯ, ржХрж┐ржирзНрждрзБ ржЯрж╛ржХрж╛ рж╣рж╛рж░рж╛ржирзЛ ржЦрзБржм ржжрзНрж░рзБрждред
рждрж╛ржЗ ржмрзЛржЭрж╛, ржерж╛ржорж╛, ржЖрж░ ржкрзНрж░рж╢рзНржи ржХрж░рж╛тАФржПржЗ рждрж┐ржиржЯрж╛ржЗ ржЯрж╛ржХрж╛ ржмрж╛ржБржЪрж╛ржирзЛрж░ ржкрзНрж░ржержо ржзрж╛ржк</p>
      </div>
    ),
    quizzes: [
      {
        id: 'q5-1',
        question: 'рж╕рзНржХрзНржпрж╛ржорзЗ рж╕рж╛ржзрж╛рж░ржгржд ржХрзЛржи ржЬрж┐ржирж┐рж╕ржЯрж╛ ржерж╛ржХрзЗ?',
        options: [
          { id: 'a', text: 'рж╕ржорзЯ ржирж┐рзЯрзЗ ржмрзЛржЭрж╛ржирзЛ', isCorrect: false },
          { id: 'b', text: 'рж╣ржарж╛рзО рждрж╛рзЬрж╛', isCorrect: true },
          { id: 'c', text: 'рж▓рж┐ржЦрж┐ржд ржХрж╛ржЧржЬ', isCorrect: false }
        ],
        explanation: 'ржЖрж░рзНржерж┐ржХ рж╕рж╛ржХрзНрж╖рж░рждрж╛ ржЖржкржирж╛рж░ рж╕ржирзНрждрж╛ржиржжрзЗрж░ рж╕ржорзНржкрзВрж░рзНржг ржЬрзАржмржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред',
        highlightLineId: 'ch5-line9'
      },
      {
        id: 'q5-2',
        question: 'ржХрзЛржерж╛рзЯ ржЕржВрж╢ ржирж╛ ржирж┐рж▓рзЗ ржкрзБрж░рж╕рзНржХрж╛рж░ ржЖрж╕рзЗ ржирж╛?',
        options: [
          { id: 'a', text: 'рж▓ржЯрж╛рж░рж┐', isCorrect: true },
          { id: 'b', text: 'ржмрж╛ржЬрж╛рж░', isCorrect: false },
          { id: 'c', text: 'ржЕржлрж┐рж╕', isCorrect: false }
        ],
        explanation: 'ржЫрзЛржЯ ржмржпрж╝рж╕ ржерзЗржХрзЗ рж╢рж┐рж╢рзБрж░рж╛ ржЯрж╛ржХрж╛рж░ ржорзВрж▓рзНржп ржПржмржВ рж╕ржЮрзНржЪржпрж╝рзЗрж░ ржЧрзБрж░рзБрждрзНржм рж╢рж┐ржЦрж▓рзЗ рж╕рж╛рж░рж╛ржЬрзАржмржи ржЙржкржХрзГржд рж╣ржмрзЗред',
        highlightLineId: 'ch5-line6'
      },
      {
        id: 'q5-3',
        question: 'ржЪрж╛ржХрж░рж┐рж░ ржЖржЧрзЗ ржХрзЛржиржЯрж╛ рж╕ржирзНржжрзЗрж╣ржЬржиржХ?',
        options: [
          { id: 'a', text: 'ржЗржирзНржЯрж╛рж░ржнрж┐ржЙ', isCorrect: false },
          { id: 'b', text: 'ржЖржЧрзЗ ржЯрж╛ржХрж╛ ржЪрж╛ржУрзЯрж╛', isCorrect: true },
          { id: 'c', text: 'ржкрзНрж░рж╢рзНржи ржХрж░рж╛', isCorrect: false }
        ],
        explanation: 'ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗрж░ ржЧрж▓рзНржк ржПржмржВ ржЕржнрж┐ржЬрзНржЮрждрж╛ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛ рж╕ржмржЪрзЗржпрж╝рзЗ ржХрж╛рж░рзНржпржХрж░ рж╢рж┐ржХрзНрж╖рж╛ ржкржжрзНржзрждрж┐ред',
        highlightLineId: 'ch5-line8'
      }
    ]
  }
];

interface LearningFlowProps {
  onCourseComplete: () => void;
}

const LearningFlow: React.FC<LearningFlowProps> = ({ onCourseComplete }) => {
  const [currentChapterIndex, setCurrentChapterIndex] = useState(0);
  const [currentQuizIndex, setCurrentQuizIndex] = useState(0);
  const [view, setView] = useState<'chapter' | 'quiz' | 'celebration' | 'retry' | 'courseComplete'>('chapter');
  const [highlightLineId, setHighlightLineId] = useState<string | undefined>();

  // Smooth scroll to top on view changes
  useEffect(() => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }, [view, currentChapterIndex, currentQuizIndex]);

  const currentChapter = CHAPTERS[currentChapterIndex];
  const currentQuiz = currentChapter.quizzes[currentQuizIndex];
  const totalChapters = CHAPTERS.length;
  const isLastQuizOfLastChapter = currentChapterIndex === totalChapters - 1 && currentQuizIndex === currentChapter.quizzes.length - 1;

  const handleQuizResult = (correct: boolean) => {
    if (correct) {
      if (isLastQuizOfLastChapter) {
        // Skip celebration, go directly to courseComplete
        setView('courseComplete');
        playCourseCompleteSound();
      } else {
        setView('celebration');
        playSuccessSound();
      }
    } else {
      setHighlightLineId(currentQuiz.highlightLineId);
      setView('retry');
    }
  };

  const playSuccessSound = () => {
    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3');
    audio.play().catch(() => {});
  };

  const playCourseCompleteSound = () => {
    // Different sound for course completion
    const audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');
    audio.play().catch(() => {});
  };

  const handleNextQuiz = () => {
    if (currentQuizIndex < currentChapter.quizzes.length - 1) {
      // More quizzes in this chapter
      setCurrentQuizIndex(prev => prev + 1);
      setView('quiz');
      setHighlightLineId(undefined);
    } else if (currentChapterIndex < totalChapters - 1) {
      // Move to next chapter
      setCurrentChapterIndex(prev => prev + 1);
      setCurrentQuizIndex(0);
      setView('chapter');
      setHighlightLineId(undefined);
    } else {
      // Course complete
      setView('courseComplete');
      playCourseCompleteSound();
    }
  };

  const handleRetry = () => {
    setView('chapter');
  };

  if (view === 'celebration') {
    return (
      <div className="min-h-screen bg-stone-900 flex flex-col items-center justify-center text-white px-12 overflow-hidden">
        <div className="animate-bounce mb-8 text-8xl select-none">тЬи</div>
        <h2 className="text-5xl font-light mb-6 text-center select-none">ржЪржорзОржХрж╛рж░! ржЖржкржирж┐ ржПржХржжржо рж╕ржарж┐ржХред</h2>
        <p className="text-stone-400 text-xl mb-12 text-center max-w-xl font-light select-none">
          {isLastQuizOfLastChapter 
            ? 'ржЖржкржирж╛рж░ ржпрж╛рждрзНрж░рж╛ рж╢рзЗрж╖ ржкрж░рзНржпрж╛ржпрж╝рзЗ ржкрзМржБржЫрзЗржЫрзЗред ржПрж░ ржЖржЧрзЗ ржЪрзВржбрж╝рж╛ржирзНржд ржЙржжржпрж╛ржкржи ржЖржЫрзЗред'
            : 'ржЖржкржирж╛рж░ ржЬрзНржЮрж╛ржи ржПржмржВ ржзрзИрж░рзНржп ржЖржкржирж╛ржХрзЗ ржЕржирзЗржХ ржжрзВрж░ ржирж┐ржпрж╝рзЗ ржпрж╛ржмрзЗред ржЪрж▓рзБржи ржкрж░ржмрж░рзНрждрзА ржкрзНрж░рж╢рзНржирзЗ ржпрж╛ржЗред'}
        </p>
        <button 
          onClick={handleNextQuiz}
          className="px-12 py-5 bg-white text-stone-900 text-sm font-bold uppercase tracking-widest hover:bg-stone-200 transition-all select-none"
        >
          {isLastQuizOfLastChapter ? 'ржХрзЛрж░рзНрж╕ рж╕ржорзНржкржирзНржирждрж╛ ржжрзЗржЦрзБржи' : 'ржкрж░ржмрж░рзНрждрзА ржкрзНрж░рж╢рзНржи'}
        </button>
        <div className="absolute inset-0 pointer-events-none opacity-0">
          {[...Array(20)].map((_, i) => (
            <div 
              key={i} 
              className="absolute animate-ping bg-stone-500 rounded-full" 
              style={{
                width: Math.random() * 10 + 'px',
                height: Math.random() * 10 + 'px',
                left: Math.random() * 100 + '%',
                top: Math.random() * 100 + '%',
                animationDelay: Math.random() * 2 + 's'
              }}
            />
          ))}
        </div>
      </div>
    );
  }

  if (view === 'retry') {
    return (
      <div className="min-h-screen bg-white flex flex-col items-center justify-center px-12">
        <div className="mb-8 text-6xl opacity-50 select-none">ЁЯХпя╕П</div>
        <h2 className="text-4xl font-light mb-6 text-stone-800 text-center select-none">ржнрзБрж▓ ржерзЗржХрзЗржЗ ржЖржорж░рж╛ рж╢рж┐ржЦрж┐ред</h2>
        <p className="text-stone-500 text-xl mb-12 text-center max-w-xl font-light select-none">
          ржЖрж░рзЗржХржмрж╛рж░ ржкрж╛ржаржЯрж┐ ржоржи ржжрж┐ржпрж╝рзЗ ржкржбрж╝рзЗ ржирж┐ржиред ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржпрзЗ ржЕржВрж╢ржЯрж┐ рж▓рж╛рж▓ рж░ржЩрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рж╛ ржЖржЫрзЗ, рж╕рзЗржЯрж┐ ржЦрзЗржпрж╝рж╛рж▓ ржХрж░рзБржиуАВ
        </p>
        <button 
          onClick={handleRetry}
          className="px-12 py-5 bg-stone-900 text-white text-sm font-bold uppercase tracking-widest hover:bg-stone-700 transition-all select-none"
        >
          ржЖржмрж╛рж░ ржкржбрж╝рзБржи
        </button>
      </div>
    );
  }

  if (view === 'courseComplete') {
    return (
      <div className="min-h-screen bg-gradient-to-b from-stone-900 to-black flex flex-col items-center justify-center text-white px-12 overflow-hidden">
        <div className="animate-bounce mb-8 text-9xl select-none">ЁЯОЙ</div>
        <h2 className="text-6xl font-light mb-6 text-center select-none">ржЕржнрж┐ржиржирзНржжржи!</h2>
        <p className="text-stone-300 text-2xl mb-8 text-center select-none">ржЖржкржирж┐ рж╕ржорзНржкрзВрж░рзНржг ржХрзЛрж░рзНрж╕ рж╕ржорзНржкржирзНржи ржХрж░рзЗржЫрзЗржи!</p>
        <p className="text-stone-400 text-lg mb-12 text-center max-w-2xl font-light select-none">
          ржЖржкржирж╛рж░ ржЖрж░рзНржерж┐ржХ ржпрж╛рждрзНрж░рж╛ ржПржЦрж╛ржирзЗржЗ рж╢рзЗрж╖ ржиржпрж╝ред ржПржЯрж┐ ржПржХржЯрж┐ рж╢рзБрж░рзБред ржПржЦржи ржЖржкржирж╛рж░ рж╢рзЗржЦрж╛ ржЬрзНржЮрж╛ржи ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзБржи ржПржмржВ ржПржХржЯрж┐ рж╕рзБрж░ржХрзНрж╖рж┐ржд ржнржмрж┐рж╖рзНржпрзО рждрзИрж░рж┐ ржХрж░рзБржиуАВ
        </p>
        <button 
          onClick={onCourseComplete}
          className="px-16 py-6 bg-white text-stone-900 text-lg font-bold uppercase tracking-widest hover:bg-stone-200 transition-all select-none"
        >
          ржЖржорж╛ржжрзЗрж░ рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржирзБржи
        </button>
        {/* Elaborate confetti for course completion */}
        <div className="absolute inset-0 pointer-events-none opacity-60">
          {[...Array(40)].map((_, i) => (
            <div 
              key={i} 
              className="absolute animate-bounce bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full" 
              style={{
                width: Math.random() * 15 + 'px',
                height: Math.random() * 15 + 'px',
                left: Math.random() * 100 + '%',
                top: Math.random() * 100 + '%',
                animationDelay: Math.random() * 3 + 's',
                animationDuration: (Math.random() * 1 + 2) + 's'
              }}
            />
          ))}
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen pt-32 pb-20 px-12 max-w-5xl mx-auto caret-transparent">
      <div className="mb-20">
        <span className="text-xs font-bold tracking-[0.3em] uppercase text-stone-400">ржзрж╛ржк {currentChapterIndex + 1} / {totalChapters}</span>
        <h2 className="text-6xl font-light mt-4 text-stone-900">{currentChapter.title}</h2>
        <span className="text-sm text-stone-500 mt-4 block">ржкрзНрж░рж╢рзНржи {currentQuizIndex + 1} / {currentChapter.quizzes.length}</span>
      </div>

      {view === 'chapter' ? (
        <div className="animate-fade-in">
          <div className={highlightLineId ? 'highlight-mode' : ''}>
            {currentChapter.content}
          </div>
          <div className="mt-20 pt-12 border-t border-stone-100 flex justify-end">
            <button 
              onClick={() => setView('quiz')}
              className="group flex items-center gap-4 text-stone-900 font-medium tracking-widest uppercase text-sm hover:text-stone-500 transition-all select-none"
            >
              <span className="text-lg">ржХрзБржЗржЬрзЗ ржЕржВрж╢ржЧрзНрж░рж╣ржг ржХрж░рзБржи</span>
              <span className="text-2xl transition-transform group-hover:translate-x-2">тЖТ</span>
            </button>
          </div>
        </div>
      ) : (
        <div className="animate-fade-in bg-stone-50 p-16 rounded-sm border border-stone-100">
          <h3 className="text-3xl font-light mb-12 text-stone-800">{currentQuiz.question}</h3>
          <div className="space-y-4 select-none">
            {currentQuiz.options.map(opt => (
              <button 
                key={opt.id}
                onClick={() => handleQuizResult(opt.isCorrect)}
                className="w-full text-left p-6 border border-stone-200 bg-white hover:border-stone-900 hover:bg-stone-900 hover:text-white transition-all text-xl font-light rounded-sm"
              >
                {opt.text}
              </button>
            ))}
          </div>
        </div>
      )}

      <style>{`
        #${highlightLineId} .highlight {
          color: #ef4444;
          font-weight: 500;
          text-decoration: underline;
          text-decoration-style: dotted;
          background-color: rgba(239, 68, 68, 0.1);
          padding: 2px 4px;
        }
        .animate-fade-in {
          animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `}</style>
    </div>
  );
};

export default LearningFlow;
